\documentclass[a5paper, fontsize=12pt]{scrbook}
\usepackage[pass-fonts, debug]{lyluatex}

\newcommand\mylily[2][1]{\lily[inline-staffsize=10, #1]{#2}}
\newenvironment{lilyenv}[1][]{%
  \ly[insert=fullpage, #1]%
}{%
  \endly%
}

%% TODO: understand how to wrap:
%% - a \newkeycommand within another \newkeycommand;
%% - a \newkeyenvironment within another \newkeyenvironment.

\begin{document}

Ceci est \mylily[voffset=10pt]{a' b' c''} un test.

\begin{lilyenv}[]
a' b' c
d' e' f
\end{lilyenv}

\end{document}
