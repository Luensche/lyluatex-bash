\documentclass[a5paper, fontsize=12pt]{scrbook}
\usepackage[pass-fonts, debug]{lyluatex}

\newcommand\mylily[2][1]{\lily[inline-staffsize=10, #1]{#2}}

\newenvironment{lyfigure}[2][]{%
\edef\mycaption{#2}
\begin{figure}
\begin{center}
  \begin{lilypond}[#1]%
}{%
  \end{lilypond}
  \caption{\mycaption}
\end{center}
\end{figure}
}

\begin{document}

Ceci est \mylily[voffset=10pt]{a' b' c''} un test.

\begin{lyfigure}{caption}
a' b' c
d' e' f
\end{lyfigure}

\end{document}
