\documentclass{scrartcl}
\usepackage{libertine}
\usepackage{minted}
\usepackage[includepaths={./, ../ly/}, relative]{lyluatex}

\begin{document}

\section*{Print LilyPond code}

\setluaoption{ly}{verbatim}{true}
\setluaoption{ly}{intertext}{The “intertext” option can be used to print some text between the code and the score}

The \texttt{verbatim} option causes the LilyPond code to be printed before the score.  The current issue is that the content of \texttt{\textbackslash lilypond} and the \texttt{lilypond} environment are passed as one line.

\lilypond[intertext=]{ c d e d }

\hrule

\begin{lilypond}[intertext=This one will have another content]
{
c d e d
}
\end{lilypond}

\hrule

\medskip
\renewcommand{\lyIntertext}[1]{

\textcolor{magenta}{#1}

\bigskip
}
The contents of included \emph{files} already work properly:

\setluaoption{ly}{intertext}{The formatting of the intertext be adjusted by renewing the command “lyIntertext”}

\lysetverbenv{\begin{minted}{TeX}}{\end{minted}}

\lilypondfile[intertext={Yet another content}]{Sphinx/Sphinx}

\setluaoption{ly}{verbatim}{false}
\setluaoption{ly}{intertext}{}

\end{document}
